{"version":3,"file":"index.js","sources":["src/component/wmts-source/source.vue?rollup-plugin-vue=script.js","src/component/wmts-source/source.vue","src/component/wmts-source/index.js"],"sourcesContent":["\nimport WMTSSource from 'ol/source/WMTS'\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\nimport { makeWatchers } from '../../util/vue-helpers'\nimport tileSource from '../../mixin/tile-source'\nimport { EXTENT_CORNER, WMTS_FORMAT, WMTS_REQUEST_ENCODING, WMTS_VERSION } from '../../ol-ext/consts'\nimport { createExtentFromProjection, getExtentCorner } from '../../ol-ext/extent'\nimport { resolutionsFromExtent } from '../../ol-ext/tile-grid'\nimport { range } from '../../util/minilo'\n\nexport default {\n  name: 'vl-source-wmts',\n  mixins: [tileSource],\n  props: {\n    dimensions: Object,\n    format: {\n      type: String,\n      default: WMTS_FORMAT,\n    },\n    layerName: {\n      type: String,\n      required: true,\n    },\n    matrixSet: {\n      type: String,\n      required: true,\n    },\n    requestEncoding: {\n      type: String,\n      default: WMTS_REQUEST_ENCODING,\n    },\n    styleName: {\n      type: String,\n      required: true,\n    },\n    version: {\n      type: String,\n      default: WMTS_VERSION,\n    },\n    url: {\n      type: String,\n      required: true,\n    },\n    origin: {\n      type: Array,\n    },\n    resolutions: {\n      type: Array,\n    },\n  },\n  methods: {\n    /**\n     * @returns {WMTS}\n     * @protected\n     */\n    createSource () {\n      return new WMTSSource({\n        attributions: this.attributions,\n        cacheSize: this.cacheSize,\n        crossOrigin: this.crossOrigin,\n        dimensions: this.dimensions,\n        format: this.format,\n        layer: this.layerName,\n        logo: this.logo,\n        matrixSet: this.matrixSet,\n        origin: this.origin,\n        projection: this.projection,\n        reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n        requestEncoding: this.requestEncoding,\n        resolutions: this.resolutions,\n        tileGrid: this._tileGrid,\n        tilePixelRatio: this.tilePixelRatio,\n        style: this.styleName,\n        version: this.version,\n        url: this.urlTmpl,\n        wrapX: this.wrapX,\n        transition: this.transition,\n        tileLoadFunction: this.tileLoadFunction,\n      })\n    },\n    /**\n     * @return {Promise}\n     * @protected\n     */\n    init () {\n      let extent = createExtentFromProjection(this.projection)\n      let resolutions = this.resolutions ? this.resolutions : resolutionsFromExtent(extent, this.maxZoom, this.tileSize)\n      let origin = this.origin ? this.origin : getExtentCorner(extent, EXTENT_CORNER.TOP_LEFT)\n      let matrixIds = Array.from(range(this.minZoom, resolutions.length))\n      /**\n       * @type {module:ol/Tile~UrlFunction}\n       * @protected\n       */\n      this._tileGrid = new WMTSTileGrid({\n        extent,\n        origin,\n        resolutions,\n        tileSize: this.tileSize,\n        minZoom: this.minZoom,\n        matrixIds,\n      })\n\n      return this::tileSource.methods.init()\n    },\n  },\n  watch: {\n    ...makeWatchers([\n      'dimensions',\n      'format',\n      'layerName',\n      'matrixSet',\n      'requestEncoding',\n      'styleName',\n      'version',\n      'resolutions',\n      'origin',\n    ], () => function () {\n      this.scheduleRecreate()\n    }),\n  },\n}\n","<script>\n  import WMTSSource from 'ol/source/WMTS'\n  import WMTSTileGrid from 'ol/tilegrid/WMTS'\n  import { makeWatchers } from '../../util/vue-helpers'\n  import tileSource from '../../mixin/tile-source'\n  import { EXTENT_CORNER, WMTS_FORMAT, WMTS_REQUEST_ENCODING, WMTS_VERSION } from '../../ol-ext/consts'\n  import { createExtentFromProjection, getExtentCorner } from '../../ol-ext/extent'\n  import { resolutionsFromExtent } from '../../ol-ext/tile-grid'\n  import { range } from '../../util/minilo'\n\n  export default {\n    name: 'vl-source-wmts',\n    mixins: [tileSource],\n    props: {\n      dimensions: Object,\n      format: {\n        type: String,\n        default: WMTS_FORMAT,\n      },\n      layerName: {\n        type: String,\n        required: true,\n      },\n      matrixSet: {\n        type: String,\n        required: true,\n      },\n      requestEncoding: {\n        type: String,\n        default: WMTS_REQUEST_ENCODING,\n      },\n      styleName: {\n        type: String,\n        required: true,\n      },\n      version: {\n        type: String,\n        default: WMTS_VERSION,\n      },\n      url: {\n        type: String,\n        required: true,\n      },\n      origin: {\n        type: Array,\n      },\n      resolutions: {\n        type: Array,\n      },\n    },\n    methods: {\n      /**\n       * @returns {WMTS}\n       * @protected\n       */\n      createSource () {\n        return new WMTSSource({\n          attributions: this.attributions,\n          cacheSize: this.cacheSize,\n          crossOrigin: this.crossOrigin,\n          dimensions: this.dimensions,\n          format: this.format,\n          layer: this.layerName,\n          logo: this.logo,\n          matrixSet: this.matrixSet,\n          origin: this.origin,\n          projection: this.projection,\n          reprojectionErrorThreshold: this.reprojectionErrorThreshold,\n          requestEncoding: this.requestEncoding,\n          resolutions: this.resolutions,\n          tileGrid: this._tileGrid,\n          tilePixelRatio: this.tilePixelRatio,\n          style: this.styleName,\n          version: this.version,\n          url: this.urlTmpl,\n          wrapX: this.wrapX,\n          transition: this.transition,\n          tileLoadFunction: this.tileLoadFunction,\n        })\n      },\n      /**\n       * @return {Promise}\n       * @protected\n       */\n      init () {\n        let extent = createExtentFromProjection(this.projection)\n        let resolutions = this.resolutions ? this.resolutions : resolutionsFromExtent(extent, this.maxZoom, this.tileSize)\n        let origin = this.origin ? this.origin : getExtentCorner(extent, EXTENT_CORNER.TOP_LEFT)\n        let matrixIds = Array.from(range(this.minZoom, resolutions.length))\n        /**\n         * @type {module:ol/Tile~UrlFunction}\n         * @protected\n         */\n        this._tileGrid = new WMTSTileGrid({\n          extent,\n          origin,\n          resolutions,\n          tileSize: this.tileSize,\n          minZoom: this.minZoom,\n          matrixIds,\n        })\n\n        return this::tileSource.methods.init()\n      },\n    },\n    watch: {\n      ...makeWatchers([\n        'dimensions',\n        'format',\n        'layerName',\n        'matrixSet',\n        'requestEncoding',\n        'styleName',\n        'version',\n        'resolutions',\n        'origin',\n      ], () => function () {\n        this.scheduleRecreate()\n      }),\n    },\n  }\n</script>\n","import { pick } from '../../util/minilo'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  Source,\n  plugin as install,\n}\n"],"names":["name","mixins","tileSource","props","dimensions","Object","format","type","String","default","WMTS_FORMAT","layerName","required","matrixSet","requestEncoding","WMTS_REQUEST_ENCODING","styleName","version","WMTS_VERSION","url","origin","Array","resolutions","methods","createSource","WMTSSource","attributions","cacheSize","crossOrigin","layer","logo","projection","reprojectionErrorThreshold","tileGrid","_tileGrid","tilePixelRatio","style","urlTmpl","wrapX","transition","tileLoadFunction","init","extent","createExtentFromProjection","resolutionsFromExtent","maxZoom","tileSize","getExtentCorner","EXTENT_CORNER","TOP_LEFT","matrixIds","from","range","minZoom","length","WMTSTileGrid","watch","makeWatchers","scheduleRecreate","plugin","Vue","options","installed","pick","assign","Source","component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,aAAe;EACbA,IAAI,EAAE,gBADO;EAEbC,MAAM,EAAE,CAACC,UAAD,CAFK;EAGbC,KAAK,EAAE;IACLC,UAAU,EAAEC,MADP;IAELC,MAAM,EAAE;MACNC,IAAI,EAAEC,MADA;MAENC,OAAO,EAAEC;KAJN;IAMLC,SAAS,EAAE;MACTJ,IAAI,EAAEC,MADG;MAETI,QAAQ,EAAE;KARP;IAULC,SAAS,EAAE;MACTN,IAAI,EAAEC,MADG;MAETI,QAAQ,EAAE;KAZP;IAcLE,eAAe,EAAE;MACfP,IAAI,EAAEC,MADS;MAEfC,OAAO,EAAEM;KAhBN;IAkBLC,SAAS,EAAE;MACTT,IAAI,EAAEC,MADG;MAETI,QAAQ,EAAE;KApBP;IAsBLK,OAAO,EAAE;MACPV,IAAI,EAAEC,MADC;MAEPC,OAAO,EAAES;KAxBN;IA0BLC,GAAG,EAAE;MACHZ,IAAI,EAAEC,MADH;MAEHI,QAAQ,EAAE;KA5BP;IA8BLQ,MAAM,EAAE;MACNb,IAAI,EAAEc;KA/BH;IAiCLC,WAAW,EAAE;MACXf,IAAI,EAAEc;;GArCG;EAwCbE,OAAO,EAAE;;;;;IAKPC,YALO,0BAKS;aACP,IAAIC,UAAJ,CAAe;QACpBC,YAAY,EAAE,KAAKA,YADC;QAEpBC,SAAS,EAAE,KAAKA,SAFI;QAGpBC,WAAW,EAAE,KAAKA,WAHE;QAIpBxB,UAAU,EAAE,KAAKA,UAJG;QAKpBE,MAAM,EAAE,KAAKA,MALO;QAMpBuB,KAAK,EAAE,KAAKlB,SANQ;QAOpBmB,IAAI,EAAE,KAAKA,IAPS;QAQpBjB,SAAS,EAAE,KAAKA,SARI;QASpBO,MAAM,EAAE,KAAKA,MATO;QAUpBW,UAAU,EAAE,KAAKA,UAVG;QAWpBC,0BAA0B,EAAE,KAAKA,0BAXb;QAYpBlB,eAAe,EAAE,KAAKA,eAZF;QAapBQ,WAAW,EAAE,KAAKA,WAbE;QAcpBW,QAAQ,EAAE,KAAKC,SAdK;QAepBC,cAAc,EAAE,KAAKA,cAfD;QAgBpBC,KAAK,EAAE,KAAKpB,SAhBQ;QAiBpBC,OAAO,EAAE,KAAKA,OAjBM;QAkBpBE,GAAG,EAAE,KAAKkB,OAlBU;QAmBpBC,KAAK,EAAE,KAAKA,KAnBQ;QAoBpBC,UAAU,EAAE,KAAKA,UApBG;QAqBpBC,gBAAgB,EAAE,KAAKA;OArBlB,CAAP;KANK;;;;;;IAkCPC,IAlCO,kBAkCC;UACFC,MAAM,GAAGC,0BAA0B,CAAC,KAAKZ,UAAN,CAAvC;UACIT,WAAW,GAAG,KAAKA,WAAL,GAAmB,KAAKA,WAAxB,GAAsCsB,qBAAqB,CAACF,MAAD,EAAS,KAAKG,OAAd,EAAuB,KAAKC,QAA5B,CAA7E;UACI1B,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKA,MAAnB,GAA4B2B,eAAe,CAACL,MAAD,EAASM,aAAa,CAACC,QAAvB,CAAxD;UACIC,SAAS,GAAG7B,KAAK,CAAC8B,IAAN,CAAWC,KAAK,CAAC,KAAKC,OAAN,EAAe/B,WAAW,CAACgC,MAA3B,CAAhB,CAAhB;;;;;;WAKKpB,SAAL,GAAiB,IAAIqB,YAAJ,CAAiB;QAChCb,MAAM,EAANA,MADgC;QAEhCtB,MAAM,EAANA,MAFgC;QAGhCE,WAAW,EAAXA,WAHgC;QAIhCwB,QAAQ,EAAE,KAAKA,QAJiB;QAKhCO,OAAO,EAAE,KAAKA,OALkB;QAMhCH,SAAS,EAATA;OANe,CAAjB;aASahD,UAAU,CAACqB,OAAX,CAAmBkB,IAAzB,WAAP;;GA5FS;EA+Fbe,KAAK,oBACAC,YAAY,CAAC,CACd,YADc,EAEd,QAFc,EAGd,WAHc,EAId,WAJc,EAKd,iBALc,EAMd,WANc,EAOd,SAPc,EAQd,aARc,EASd,QATc,CAAD,EAUZ;WAAM,YAAY;WACdC,gBAAL;KADC;GAVY,CADZ;CA/FP;;;ACPY,2BAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAZ,SAASC,MAAT,CAAiBC,GAAjB,EAAoC;MAAdC,OAAc,uEAAJ,EAAI;;MAC9BF,MAAM,CAACG,SAAX,EAAsB;;;;EAGtBH,MAAM,CAACG,SAAP,GAAmB,IAAnB;EAEAD,OAAO,GAAGE,IAAI,CAACF,OAAD,EAAU,gBAAV,CAAd;EACAxD,MAAM,CAAC2D,MAAP,CAAcC,MAAd,EAAsBJ,OAAtB;EAEAD,GAAG,CAACM,SAAJ,CAAcD,MAAM,CAACjE,IAArB,EAA2BiE,MAA3B;;;;;;"}